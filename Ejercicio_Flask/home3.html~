
<html lang="en">
  <head>
    <title>Bienvenido</title>
    <script  src="../static/js/jQuery.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" crossorigin="anonymous" ></script>

    <script type=”text/javascript” src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.js" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>

    <script type=”text/javascript” src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" >
    <link href="../static/css/signup.css" rel="stylesheet">
    <link href="../static/css/font-awesome.min.css" rel="stylesheet" >
   
    
    
    
    <script type="text/javascript" src="../static/js/jquery.tmpl.js"></script>

<script>
	$(function(){
		$.ajax({
			url : '/getwish',
			type : 'GET',
			success: function(res){
				// Parse the JSON response
                		var wishObj = JSON.parse(res);
                 
                		// Append to the template
                		$('#listTemplate').tmpl(wishObj).appendTo('#ulist');
 
 
            		},
           		error: function(error) {console.log(error);
            		}
        });
    });
    </script>   

    <script>
	function getwish(){
		$.ajax({
			url : '/getwish',
			type : 'GET',
			success: function(res){
				// Parse the JSON response
                		var wishObj = JSON.parse(res);
				$('#ulist').empty();
                 
                		// Append to the template
                		$('#listTemplate').tmpl(wishObj).appendTo('#ulist');
 
 
            		},
           		error: function(error) {console.log(error);
            		}
        });
    }
    </script>
    <script>
        function Edit(elm) {
		localStorage.setItem('editId',$(elm).attr('data-id'));
        	$.ajax({
            		url: '/getwishbyID',
            		data: {id: $(elm).attr('data-id')},
        		type: 'POST',
        		success: function(res) {
				console.log(res);
				// Parse the received JSON string
				var data = JSON.parse(res);
 
				//Populate the Pop up
				$('#editTitle').val(data[0
]['Titulo']);
				$('#editDescription').val(data[0]['Descripcion']);
 
				// Trigger the Pop Up
				$('#editModal').modal();},
        		error: function(error) {console.log(error);}
    			});
	}
    </script>

<script>
    $('#btnUpdate').click(function() {
    $.ajax({
            url: '/updatewish',
            data: {
            tit: $('#editTitle').val(),
            desc: $('#editDescription').val(),
            id: localStorage.getItem('editId')
        },
        type: 'POST',
        success: function(res) {
            $('#editModal').modal('hide');
            // Re populate the grid
	    getwish();
        },
        error: function(error) {
            console.log(error);
        }
    })
});
</script>

    <script id="listTemplate" type="text/x-jQuery-tmpl">
    <li class="list-group-item">
        <div class="checkbox">
            <label>
            ${Titulo}
            </label>
        </div>
        <div class="pull-right action-buttons">
            <button type="button" class="btn btn-default" data-id=${Id} onclick="Edit(this)"><span class="glyphicon glyphicon-pencil "></span></button>
        </div>
    </li>
    </script>


    <style>
      .trash { color:rgb(209, 91, 71); }
      .panel-body .checkbox { display:inline-block;margin:0px; }
      .list-group { margin-bottom:0px; }
   </style>
  </head>

  <body>



  
  
    <div class="container">
      <div class="header">
        <nav>
          <ul class="nav nav-pills pull-right">
	    <li role="presentation" class="active" ><a href="#" >Principal</a>
                    </li>
	    <li role="presentation"><a href="/AddWish">Agregar Deseo!</a></li>
            <li role="presentation"><a href="/logout">Salir</a></li>
          </ul>

        </nav>
        <h3 class="text-muted">Bienvenido a IoTSol  </h3>
      </div>
      <h1>{{bienvenido}}</h1>
      <div class="jumbotron">
	
      

    
	

    <div class="row">
        <div class="col-md-12">
            
                <div class="panel-body">

                    <ul id="ulist" class="list-group">
                        
 
                        
                    </ul>
		    <nav>
  <ul class="pagination">
    
  </ul>
</nav>
                </div>
                
            </div>
        </div>
    </div>
	
 	
 	
<div class="modal " id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                
                
                <h4 class="modal-title" id="editModalLabel">Editar deseo</h4>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <label for="recipient-name" class="control-label">Titulo:</label>
                        <input type="text" class="form-control" id="editTitle">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="control-label">Descripción:</label>
                        <textarea class="form-control" id="editDescription"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <a href="#close-modal" rel="modal:close"   type="button" class="btn" data-dismiss="modal" class="close-modal"><span class="glyphicon glyphicon-remove "></span></a>
                <button type="button" id="btnUpdate" class="btn btn-primary"><span class="glyphicon glyphicon-floppy-saved "></span></button>
            </div>
        </div>
    </div>
</div>
       
      
  

        </div> 
      	 
      <footer class="footer">
        <p>&copy; Company 2019 </i></p>
      </footer>

    </div>
  </body>
</html>

